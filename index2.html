<html>
<head>
  <meta charset="UTF-8">
  <script language="javascript" type="text/javascript" src="libraries/p5.js"></script>
  <script language="javascript" type="text/javascript" src="libraries/jquery.js"></script>
  <script language="javascript" type="text/javascript" src="node.js"></script>
  <script language="javascript" type="text/javascript" src="skech2.js"></script>
  <script language="javascript" type="text/javascript" src="tsproblem.js"></script>
  <script language="javascript" type="text/javascript" src="aco.js"></script>
   <meta charset="utf-8">
    <link rel="shortcut icon" href="favicon.ico" />
    <title>Workflow optimization simulator</title>
</head>

<body>
	<div>
		<div style="text-align: center;"">
			<H1>Workflow optimization simulator</H1>
		</div>
		<table style="width: 100%; font-size: 0.8em;" border="1px">

		    <tr align="center" >
		        <th style="padding:2.5px; width: 50%;" >MAP</th>
		        <th style="padding:2.5px; width: 50%;" >CONFIGURATIONS</th>
		    </tr>
		    <tr>
			 	<th>
			 		<div>
				 		<div style="width:657px;height:20px;text-align:center;clear:both;">X</div>
				 		<div style="width:20px;padding-top:300px;float:left;">Y</div>
				    	<div style="width:402px;float:left" id="canvas"></div>
					</div>
		    	</th>
		    	<th>
		    		<div>
							<br>
					        <table id="aco-params">
					            <tbody>
					            <tr>
					                <td colspan="2"><b>Configuration ERP</b></td>
					            </tr>
					            	 <tr>
						                <td>Mode: </td>
						                <td>
						                     <select id="erp-mode" onchange="this.options[this.selectedIndex].value && (window.location=this.options[this.selectedIndex].value);">
						    					<option value="index2.html" selected="selected"> Configured </option>
						                        <option  value="index.html" >Draw free</option>
						                    </select>
						                </td>
						            </tr>
						        </tbody>
						    </table>
						    <table id="configMode">
						    	 <tbody>
					            <tr>
					                <td colspan="2"></td>
					            </tr>
						          
							            <tr>
						                <td>Roles: </td>
						                <td>
						                    <b>3 (default)</b>
						                </td>
						               
					            </tr>
					             <tr>
						               <td>Numbers of tasks: </td>
						                <td>
						                    <select id="tasksNumber" onchange="changeTaskNumber()">
						                        <option value="5">5</option>
						                        <option value="6">6</option>
						                        <option value="7">7</option>
						                        <option value="8">8</option>
						                        <option value="9">9</option>
						                        <option value="10" selected="selected">10</option>
						                    </select>
					                	</td>
						           </tr >
					        </tbody>
					    </table>
					    <br>
					</div>
						<div>
							<br>
					        <table id="aco-params">
					            <tbody>
					            <tr>
					                <td colspan="2"><b>Optimization settings</b></td>
					            </tr>
					            <tr>
					                <td>Mode: </td>
					                <td>
					                    <select id="aco-mode" onchange="enableTable()">
					                        <option value="aco" selected="selected">Ant Coloy Optmization</option>
					                        <option value="tsp">Travelling salesman problem</option>
					                    </select>
					                </td>
					            </tr>
					        </tbody>
					    </table>
					    <table id="tspTable">
					    	<TBODY>
					            	<tr>
					            	<td>Max Iterations: </td>
						                <td>
						                    <select id="max-iterations">
						                        <option value="50">50</option>
						                        <option value="100">100</option>
						                        <option value="200" selected="selected">200</option>
						                        <option value="300">300</option>
						                        <option value="500">500</option>
						                    </select>
						               </td>
						           </tr>
						          
						           </TBODY>
						       </table>
						       <table id="acoTable">
						       	<tbody>
						            <tr  >
						                <td>Min Scaling Factor: </td><td>
						                <select id="min-scalar">
						                    <option value="0.0001">0.0001</option>
						                    <option value="0.001" selected="selected">0.001</option>
						                    <option value="0.01">0.01</option>
						                    <option value="0.1">0.1</option>
						                </select><br><br>
						                </td>
						            </tr>
						            <tr>
						                <td>Colony Size: </td><td>
						                <select id="colony-size">
						                    <option value="10">10</option>
						                    <option value="20">20</option>
						                    <option value="30" selected="selected">30</option>
						                    <option value="50">50</option>
						                    <option value="100">100</option>
						                    <option value="200">200</option>
						                </select>
						                </td>
						            </tr>
						            <tr ">
						                <td>Max Iterations: </td>
						                <td>
						                    <select id="max-iterations">
						                        <option value="50">50</option>
						                        <option value="100">100</option>
						                        <option value="200" selected="selected">200</option>
						                        <option value="300">300</option>
						                        <option value="500">500</option>
						                    </select>
						                </td>
						            </tr>
						            <tr >
						                <td>Alpha: </td>
						                <td>
						                    <select id="alphaColony">
						                        <option value="1" selected="selected">1</option>
						                        <option value="2">2</option>
						                        <option value="3">3</option>
						                        <option value="4">4</option>
						                        <option value="5">5</option>
						                        <option value="10">10</option>
						                        <option value="15">15</option>
						                    </select>
						                </td>
						            </tr>
						            <tr >
						                <td>Beta: </td>
						                <td>
						                    <select id="betaColoy">
						                        <option value="1">1</option>
						                        <option value="2">2</option>
						                        <option value="3" selected="selected">3</option>
						                        <option value="4">4</option>
						                        <option value="5">5</option>
						                        <option value="10">10</option>
						                        <option value="15">15</option>
						                    </select>
						                </td>
						            </tr> 
						            <tr >
						                <td>Evaporation: </td>
						                <td>
						                    <select id="rho">
						                        <option value="0">0</option>
						                        <option value="0.001">0.001</option>
						                        <option value="0.01">0.01</option>
						                        <option value="0.05">0.05</option>
						                        <option value="0.1" selected="selected">0.1</option>
						                        <option value="0.2">0.2</option>
						                        <option value="0.5">0.5</option>
						                    </select>
						                </td>
						            </tr>
						            <tr >
						                <td>Initial Pheromone: </td>
						                <td>
						                    <select id="init-pheromone">
						                        <option value="0">0</option>
						                        <option value="1" selected="selected">1</option>
						                        <option value="2">2</option>
						                        <option value="5">5</option>
						                        <option value="10">10</option>
						                        <option value="20">20</option>
						                        <option value="50">50</option>
						                    </select>
						                </td>
						            </tr>
						            <tr >
						                <td>Pheromone Deposit Weight: </td>
						                <td>
						                    <select id="pheromone-deposit-weight">
						                        <option value="1" selected="selected">1</option>
						                        <option value="2">2</option>
						                        <option value="5">5</option>
						                        <option value="10">10</option>
						                        <option value="20">20</option>
						                        <option value="50">50</option>
						                    </select>
						                </td>
						            </tr>
					        </tbody>
					    </table>
					</div>
					<div>
					  <table>
			            <tbody><tr>
			                <td colspan="2"><b>Debug Info</b></td>
			            </tr>
			            <tr style="display:none;" class="aco-info">
			                <td>Interation: </td><td id="iteration-info"></td>
			            </tr>
			            <tr style="display:none;" class="aco-info">
			                <td>Best Distance: </td><td id="best-distance"></td>
			            </tr>
			            <tr id="aco-buttons">
			                <td colspan="3"><button id="start-search-btn">Start</button> 
			                				<button id="reset" onclick="clearElements()">Clear</button>
			                </td>
			            </tr>
					        </tbody>
					 </table>
				<div>
		    </tr>
		</table>
	</div>
	<div>
		<h3>  Fork the project on <a href="https://github.com/rafaelMurata/rafaelmurata.github.io"> <b>GitHub</b></a> </h3>
	</div>

</body>
<script type="text/javascript">
	
var btnStartIsPress = false;
document.getElementById('start-search-btn').onclick = function(){

  noLoop();
  var maxi = $('#max-iterations option:selected').val();
  var type = $('#aco-mode option:selected').val();

  if(type=='tsp'){
		 const tsp = new TSPSolution(maxi);
		 tsp.runTSP();
	}else{
	  	var colony_size = $('#colony-size option:selected').val();
	  	var alphaColony = $('#alphaColony option:selected').val();
	 	var betaColoy = $('#betaColoy option:selected').val();
	 	var rho = $('#rho option:selected').val();
	 	var pheromone_d = $('#pheromone-deposit-weight option:selected').val();
	 	var min_scalar = $('#min-scalar option:selected').val();

		const antColony = new AntColony(colony_size,alphaColony,betaColoy,rho,pheromone_d,maxi,min_scalar);
		antColony.reset();
		antColony.run();
	}
	btnStartIsPress=true;
}
</script>
</html>